<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>数据库课程设计——火车票售票系统 | ccclll777's blogs</title><meta name="keywords" content="数据库,vue,springboot"><meta name="author" content="ccclll777"><meta name="copyright" content="ccclll777"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库课程设计的题目，设计了一个火车票售票系统，实现了列车信息查询，车票查询及购买，订单查询，个人信息管理等功能，数据是从12306爬取的真实数据。">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库课程设计——火车票售票系统">
<meta property="og:url" content="http://yoursite.com/2020/04/26/Undergraduate-Curriculum-Design/CurriculumDesign-Databases/index.html">
<meta property="og:site_name" content="ccclll777&#39;s blogs">
<meta property="og:description" content="数据库课程设计的题目，设计了一个火车票售票系统，实现了列车信息查询，车票查询及购买，订单查询，个人信息管理等功能，数据是从12306爬取的真实数据。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png">
<meta property="article:published_time" content="2020-04-26T06:52:34.000Z">
<meta property="article:modified_time" content="2021-10-17T01:36:25.745Z">
<meta property="article:author" content="ccclll777">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png"><link rel="shortcut icon" href="/images/avatar.png"><link rel="canonical" href="http://yoursite.com/2020/04/26/Undergraduate-Curriculum-Design/CurriculumDesign-Databases/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库课程设计——火车票售票系统',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2021-10-17 09:36:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="ccclll777's blogs" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ccclll777's blogs</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库课程设计——火车票售票系统</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-26T06:52:34.000Z" title="发表于 2020-04-26 14:52:34">2020-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-10-17T01:36:25.745Z" title="更新于 2021-10-17 09:36:25">2021-10-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">课程设计</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库课程设计——火车票售票系统"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>数据库课程设计的题目，设计了一个火车票售票系统，实现了列车信息查询，车票查询及购买，订单查询，个人信息管理等功能，数据是从12306爬取的真实数据。</p>
<span id="more"></span>
<h2 id="项目链接"><a class="markdownIt-Anchor" href="#项目链接"></a> 项目链接</h2>
<p>前端项目链接：<br />
<a target="_blank" rel="noopener" href="https://github.com/ccclll777/db_design_web">https://github.com/ccclll777/db_design_web</a></p>
<p>后端项目链接：<br />
<a target="_blank" rel="noopener" href="https://github.com/ccclll777/db_design_service">https://github.com/ccclll777/db_design_service</a></p>
<p><strong>如果觉得有帮助，请点个star吧</strong></p>
<h2 id="题目简述"><a class="markdownIt-Anchor" href="#题目简述"></a> 题目简述</h2>
<p><strong>火车票售票系统</strong></p>
<ul>
<li>车次管理（车次，起止地点，到达时间，开车时间）</li>
<li>坐席管理（车厢号，座位号）</li>
<li>售票（直达，换乘）改签，退票</li>
<li>余票查询</li>
<li>订单查询</li>
<li>用户管理</li>
</ul>
<h2 id="开发环境与技术"><a class="markdownIt-Anchor" href="#开发环境与技术"></a> 开发环境与技术</h2>
<ul>
<li><strong>开发工具</strong><br />
工具：WebStorm ,IntelliJ IDEA<br />
Mysql8.0.12   Tomcat 8.0   Maven  Git  Redis</li>
<li><strong>前端技术栈</strong><br />
HTML+CSS+Javascript<br />
前端框架:Vue.js+ElementUi</li>
<li><strong>后端技术栈</strong><br />
Spring Boot为框架<br />
MyBatis操作数据库<br />
Redis进行用户信息缓存<br />
Maven作为项目构建工具</li>
</ul>
<h2 id="需求分析"><a class="markdownIt-Anchor" href="#需求分析"></a> 需求分析</h2>
<p><strong>1.用户登录注册</strong><br />
用户注册登陆后可以使用系统的所有功能，如添加乘客，购买车票，查询订单等等</p>
<p><strong>2.系统需要提供基础的列车信息查询：</strong><br />
根据车次查询列车是否正常运行，以及查看列车的基本信息（如列车类型，始发站，终点站，开车时间，到达时间，运行时间，车厢数等等）<br />
根据车次，查询列车经停站信息（包含这趟列车每一个经停车站的车站名，到达时间，开车时间，运行时间等信息）</p>
<p><strong>3.系统需要提供根据车次查询列车详细信息的功能：</strong><br />
根据始发站和终点站，查询可以满足自己行程要求并且正常运行的列车（可以根据开车时或者运行时间进行排序），并且可以进一步查看中间经过的的车站信息，以及开车时间，到达时间等。<br />
系统需要提供接续换乘一次的查询，根据输入的出发站和终点站，可以查询换乘一次满足条件的列车，并且可以根据开车时间或总运行时间进行排序。</p>
<p><strong>4.车票购买</strong><br />
在查询到符合自己出行条件的列车后，可以查询列车的剩余座位以及购买车票。<br />
首先添加乘客（添加需要购买车票的乘客）——&gt;进行座位选择（为每一位乘客选择座位)——&gt;订单支付——&gt;购票成功<br />
接续换乘车票购买流程类似，只不过在选座时，需要选择两趟列车的座位。<br />
<strong>5.系统需要提供用户的个人信息修改功能以及修改密码功能。</strong></p>
<p><strong>6.用户可以给除自己以外别的乘客购买车票，所以提供添加乘客的功能，每个用户下都可以添加多个乘客，从而为别的乘客购买车票。</strong></p>
<p><strong>7.系统提供订单的查询功能，可以查询到与自己有关的所有订单，比如所有订单，未支付订单，未出行订单。</strong></p>
<p><strong>8.未支付订单针对下单但是没有支付的订单，可以在规定的时间内进行支付操作，如果在规定时间内没有完成操作，则订单会作废，变成未完成支付的订单。</strong></p>
<p><strong>9.未出行订单针对已经支付但是没有出行的订单，可以在未出行订单中查看自己的出行计划。未出行订单可以进行改签操作，改签相同出发站和终点站的其他列车。</strong></p>
<p><strong>10.未出行订单还可以进行退票操作，从而取消订单。</strong></p>
<h2 id="数据库概念设计"><a class="markdownIt-Anchor" href="#数据库概念设计"></a> 数据库概念设计</h2>
<p>本系统中一共6个实体集，分别是，用户实体，乘客实体，列车信息实体，列车经停信息实体，订单实体，列车座位信息实体</p>
<p><strong>（1）用户实体：</strong><br />
保存注册系统的用户的信息，主码为用户电话号码，用来作为每一个用户的唯一标记，同时电话号码也作为登录系统的用户名来使用。其中存在用户自定义的完整性约束：用户类型（0为学生，1为成人，2为管理员），性别（0为女性，1为男性）<br />
<img src="https://img-blog.csdnimg.cn/20200426225834623.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（2）乘客实体：</strong><br />
每个用户下可以添加多个乘客信息，然后为多个乘客购票。<br />
<img src="https://img-blog.csdnimg.cn/20200426225849883.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>(3)列车信息实体：</strong><br />
列车信息存储了列车整体信息，每一趟列车都有一条自己的总的列车信息，表示这趟列车是正常运行，或者是停开的。列车编号作为列车的主码（由于列车编号相同的列车，由于开车方向的不同，在途中可能改变车次，但是列车编号是固定不变的）<img src="https://img-blog.csdnimg.cn/20200426225900397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（4）列车经停信息实体：</strong><br />
每个列车都有经停信息表，存储了列车停靠的不同车站，以车站编号排序。<br />
<img src="https://img-blog.csdnimg.cn/20200426225909759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
（5）列车座位信息表，为了简化系统设计的难度，统一固定车次为D,G开头的列车设置特等座，一等座和二等座三个座位类型，其他类型的车设置软卧，硬卧，硬座三个座位类型。并且如果座位类型相同，则车厢的座位数以及布局是相同的。比如：特等座一节车厢18座，一排2座，一等座一节车厢52座，一排4座，二等座一节车厢85座，一排5座。软卧一节车厢36个位置，一列2个位置，分为上下铺。硬卧一节车厢66个位置，一列3个位置，分为上中下铺。硬座一节车厢120个位置，一排6个座位。<br />
列车座位信息的主码为列车编号，车厢编号。外码为列车编号，参照列车信息实体。<br />
当车厢号固定时，说明座位类型已经固定，具体的位置是根据座位号对于相应一排的座位数求模运算得到的，比如特等座5号为5/2 +1 =3  3排<br />
5%2 = 1 A座<br />
<img src="https://img-blog.csdnimg.cn/20200426225924719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（6）订单信息实体：</strong><br />
存储了系统中所有的订单信息，订单信息实体的主码为订单编号，外码为用户电话号码（用户实体主码），乘客身份证号码（乘客实体主码），列车编号（列车信息主码）.<br />
<img src="https://img-blog.csdnimg.cn/20200426225936769.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>整体E-R图为：</strong><br />
<img src="https://img-blog.csdnimg.cn/20200426230014717.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<img src="https://img-blog.csdnimg.cn/20200426230019119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>说明：</strong><br />
（1）每个用户可以添加多个乘客<br />
（2）每个用户可以拥有多个订单<br />
（3）每个订单属于一个乘客<br />
（4）每个订单拥有一趟列车的信息<br />
（5）每个订单拥有一个列车的座位信息<br />
（6）每个订单拥有两个列车经停的车站信息<br />
（7）每个列车有多个经停的车站<br />
（8）每个列车拥有多个车厢的座位信息</p>
<h2 id="e-r图向关系模式的转化"><a class="markdownIt-Anchor" href="#e-r图向关系模式的转化"></a> E-R图向关系模式的转化</h2>
<p>（1）实体转化为关系模式<br />
用户（电话号码，密码，身份证号，邮箱，真实姓名，用户类型，性别，地址）<br />
乘客（乘客身份证号，乘客真实姓名，乘客电话号码，乘客类型，地址）<br />
列车信息（列车编号，车次，列车类型，列车车厢数，列车始发站，列车终点站，列车开车时间，列车到达时间，列车到达日期，列车运行时间，列车状态）<br />
列车座位信息（编号，车厢号，座位类型，座位数）<br />
列车经停信息（车次，车展编号，车站名，到达时间，总运行时间，开车时间）<br />
订单信息（订单编号，出发站编号，到达站编号，车厢号，座位编号，订单创建时间，订单状态，开车时间）<br />
（2）联系转化为关系模式<br />
用户拥有乘客（用户电话号码，乘客身份证号码）<br />
用户拥有订单（用户电话号码，订单编号）<br />
乘客拥有订单（乘客身份证号码，订单编号）<br />
订单拥有列车（订单编号，列车编号）<br />
订单拥有座位（订单编号，车厢号，座位号）<br />
列车信息拥有列车经停站信息（列车编号，车次，车站编号）<br />
列车拥有座位（列车编号，车厢号）<br />
（3）实体与联系进行合并，E-R图中的一对一与一对多的联系，通过参照完整性与关系模式进行合并，并进行一定修改，合并。<br />
用户（电话号码，密码，身份证号，邮箱，真实姓名，用户类型，性别，地址）<br />
乘客（用户电话号码，乘客身份证号，乘客真实姓名，乘客电话号码，乘客类型，地址）<br />
列车信息（列车编号，车次，列车类型，列车车厢数，列车始发站，列车终点站，列车开车时间，列车到达时间，列车到达日期，列车运行时间，列车状态）<br />
列车座位信息（列车编号，车厢号，座位类型，座位数）<br />
列车经停信息（列车编号，车次，车站编号，车站名，到达时间，总运行时间，开车时间）<br />
订单信息（订单编号，用户电话号码，乘客身份证号码，列车编号，出发站编号，到达站编号，车厢号，座位编号，订单创建时间，订单状态，开车时间）</p>
<h2 id="数据库逻辑设计"><a class="markdownIt-Anchor" href="#数据库逻辑设计"></a> 数据库逻辑设计</h2>
<p><img src="https://img-blog.csdnimg.cn/20200426230314346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<img src="https://img-blog.csdnimg.cn/20200426230405802.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426230416251.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/202004262304254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426230434131.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<img src="https://img-blog.csdnimg.cn/20200426230657148.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426230440827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><img src="https://img-blog.csdnimg.cn/20200426230708617.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426230450657.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h2 id="数据库物理结构设计"><a class="markdownIt-Anchor" href="#数据库物理结构设计"></a> 数据库物理结构设计</h2>
<p><strong>(1)用户表：</strong><br />
在用户表中，由于查询以及更新的条件都是用户电话号码，所以将用户电话设置为主码，会相应的建立索引，提高查询的效率。<br />
<strong>(2)乘客表：</strong><br />
主码为用户电话号码以及乘客身份证号码，由于有许多查询以这两个为条件，所以设置成主码增加查询效率。虽然在更新时比较耗时，但是更新的频率比查询的频率少很多。<br />
<strong>(3)列车信息表：</strong><br />
以列车编号为主码，会自动建立索引，提高查询效率。<br />
<strong>(4)列车经停信息表：</strong><br />
这个表的查询量较大，但插入，删除，更新的操作较小，所以在这个表上建立一定的索引时非常合算的。<br />
由于需要根据车次以及列车编号查询列车经停信息，所以可以在车次与列车编号上建立普通索引即可，提高查询效率。<br />
在根据出发站以及到达站进行对符合条件的列车进行检索时，需要用到车站名称，所以应该在车站名称上建立普通索引<br />
<strong>（5）列车座位表：</strong><br />
列车座位表的主码是列车编号以及车厢号，会自动建立索引，查询时也会以这两个为条件，所以不用在增加其他索引。<br />
<strong>（6）订单表：</strong><br />
由于订单表的插入频率以及查询频率都很高，而建立索引会降低插入的效率，而不建立索引会降低查询的效率，所以需要在两者之间进行取舍。<br />
由于订单表的主码为订单编号，会自动建立唯一索引。<br />
用户电话号码，和乘客身份证号码作为外码，常常成为查询的条件，所以应该在外码上建立普通索引。<br />
在查询剩余车票信息时，需要先在订单列表中查询某辆车在某个时间的那一段路程已经被订购过。查询时的条件需要有出发车站编号，到达车站编号，列车编号，订单状态，开车日期	。<br />
所以可以考虑在出发车站编号，到达车站编号，列车编号，订单状态，开车日期上建立普通索引。提高查询效率。毕竟查询的次数要远远多余订票的次数，所以查询的次数会多余插入的次数，用空间来换取更快的效率，还是可以接受的。</p>
<h2 id="项目整体结构"><a class="markdownIt-Anchor" href="#项目整体结构"></a> 项目整体结构</h2>
<p><img src="https://img-blog.csdnimg.cn/20200426230742935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
说明：<br />
<strong>（1）用户首先进行账号的注册，然后进行登录操作</strong><br />
登录之后进入主页，然后有不同的板块进行选择<br />
<strong>（2）列车信息查询板块：</strong><br />
列车信息：可以查询所有正常运行的列车信息<br />
列车时刻表：可以根据车次查询列车的经停信息，<br />
列车查询：可以根据出发站和到达站查询符合条件的列车<br />
接续换乘：可以根据出发站和到达站查询换乘一次能到达的列车<br />
<strong>（3）车票查询及购买板块：</strong><br />
余票查询：可以根据出发站和到达站查询符合条件的列车并且查看余票以及订购车票（跳转到车票购买界面）<br />
车票购买：添加乘客后，可以为乘客选座，然后支付，购票成功。<br />
接续换乘：可以根据出发站和到达站查询换乘一次能到达的列车，然后进行购票，跳转到接续换乘车票购买界面。<br />
接续换乘车票购票：添加乘客后，为乘客进行选座操作，然后支付，购票成功<br />
<strong>（4）订单信息板块：</strong><br />
全部订单：查询用户名下的全部订单状态<br />
未支付订单：查询用户名下全部未支付的订单，然后可以进行订单的支付操作<br />
未出行订单：可以查询到已经支付，但是还未出行的订单，可以进行退票以及改签操作。<br />
订单改签：进行重新的选座已经支付操作。<br />
<strong>（5）个人信息板块：</strong><br />
查看个人信息：查看用户的个人信息。<br />
修改个人信息：修改用户的个人信息<br />
修改密码：修改登录密码<br />
查看乘客信息：查看此用户名下的所有乘客。<br />
添加乘客：为此用户名下添加乘客，之后可以为该乘客购票</p>
<h2 id="界面截图"><a class="markdownIt-Anchor" href="#界面截图"></a> 界面截图</h2>
<p><strong>（1）列车信息查询界面</strong><br />
<img src="https://img-blog.csdnimg.cn/2020042623092077.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
（2）列车时刻表查询<br />
<img src="https://img-blog.csdnimg.cn/20200426230948887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（3）列车查询</strong><br />
<img src="https://img-blog.csdnimg.cn/20200426231041586.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426231044852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（4）接续换乘查询</strong><br />
<img src="https://img-blog.csdnimg.cn/20200426231101869.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426231107309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p>（5）余票查询以及购买<br />
<img src="https://img-blog.csdnimg.cn/20200426231136480.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426231142386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426231146475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/20200426231151186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /><br />
<strong>（6）订单列表</strong><br />
<img src="https://img-blog.csdnimg.cn/20200426231208778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h2 id="关键sql语句设计"><a class="markdownIt-Anchor" href="#关键sql语句设计"></a> 关键sql语句设计</h2>
<p><strong>（1）根据车次查询列车所有经停站信息</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span>   b.station_no <span class="hljs-keyword">as</span> 车站编号 ,b.station_name <span class="hljs-keyword">as</span>  车站名, <br>           b.train_number <span class="hljs-keyword">as</span> 车次 , b.start_time  <span class="hljs-keyword">as</span> 开车时间, <br>           b.arrive_time <span class="hljs-keyword">as</span> 到达时间 , b.running_time  <span class="hljs-keyword">as</span> 历时 <br>                 <span class="hljs-keyword">from</span> train_parking_station（列车经停站信息表） <span class="hljs-keyword">as</span> a ,train_parking_station  <span class="hljs-keyword">as</span> b <br>                         <span class="hljs-keyword">where</span> a.train_number = <span class="hljs-string">&#x27;车次&#x27;</span>   <span class="hljs-keyword">and</span> a.train_no = b.train_no <br>                                   <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> b.station_no<br></code></pre></td></tr></table></figure>
<p><strong>（2）根据起始站，目的站查询符合条件的列车</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> C.train_no <span class="hljs-keyword">as</span> 列车编号 ,C.train_number <span class="hljs-keyword">as</span> 车次 ,<br>         C.station_name <span class="hljs-keyword">as</span> 起始站 ,D.station_name <span class="hljs-keyword">as</span> 目的站 ,             <br>         C.station_no <span class="hljs-keyword">as</span> 起始站编号 , D.station_no <span class="hljs-keyword">as</span>  目的站编号  ,<br>         C.start_time <span class="hljs-keyword">as</span> 开车时间 , D.arrive_time <span class="hljs-keyword">as</span> 到达时间,             <br>         C.running_time <span class="hljs-keyword">as</span> 到起始站已运行时间 ,D.running_time <span class="hljs-keyword">as</span> 到目的站已运行时间             <br>         <span class="hljs-keyword">from</span> train_parking_station(列车经停站信息表) <span class="hljs-keyword">as</span> C ,train_parking_station <span class="hljs-keyword">as</span> D <br>         <span class="hljs-keyword">where</span> C.train_no = D.train_no <br>         <span class="hljs-keyword">and</span> C.station_name =<span class="hljs-string">&#x27;济南西&#x27;</span><br>         <span class="hljs-keyword">and</span> D.station_name = <span class="hljs-string">&#x27;上海虹桥&#x27;</span>     <br>         <span class="hljs-keyword">and</span> C.station_no &lt;  D.station_no        <br>         <span class="hljs-keyword">and</span> C.train_no <span class="hljs-keyword">in</span><br>         (<span class="hljs-keyword">select</span> train_no <br>                   <span class="hljs-keyword">from</span>   train_info        <br>                 <span class="hljs-keyword">where</span>  train_running_type = <span class="hljs-string">&#x27;正在运行&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p><strong>（3）根据起始站，目的站查询符合条件的列车</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> C.train_no <span class="hljs-keyword">as</span> 列车编号 ,C.train_number <span class="hljs-keyword">as</span> 车次 ,<br>         C.station_name <span class="hljs-keyword">as</span> 起始站 ,D.station_name <span class="hljs-keyword">as</span> 目的站 ,             <br>         C.station_no <span class="hljs-keyword">as</span> 起始站编号 , D.station_no <span class="hljs-keyword">as</span>  目的站编号  ,<br>         C.start_time <span class="hljs-keyword">as</span> 开车时间 , D.arrive_time <span class="hljs-keyword">as</span> 到达时间,             <br>         C.running_time <span class="hljs-keyword">as</span> 到起始站已运行时间 ,D.running_time <span class="hljs-keyword">as</span> 到目的站已运行时间             <br>         <span class="hljs-keyword">from</span> train_parking_station(列车经停站信息表) <span class="hljs-keyword">as</span> C ,train_parking_station <span class="hljs-keyword">as</span> D <br>         <span class="hljs-keyword">where</span> C.train_no = D.train_no <br>         <span class="hljs-keyword">and</span> C.station_name =<span class="hljs-string">&#x27;济南西&#x27;</span><br>         <span class="hljs-keyword">and</span> D.station_name = <span class="hljs-string">&#x27;上海虹桥&#x27;</span>     <br>         <span class="hljs-keyword">and</span> C.station_no &lt;  D.station_no        <br>         <span class="hljs-keyword">and</span> C.train_no <span class="hljs-keyword">in</span><br>         (<span class="hljs-keyword">select</span> train_no <br>                   <span class="hljs-keyword">from</span>   train_info        <br>                 <span class="hljs-keyword">where</span>  train_running_type = <span class="hljs-string">&#x27;正在运行&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p><strong>（4）根据起始站，目的站查询换乘的列车</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> A.train_no <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>编号 ,A.train_number <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>车次, D.train_no <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-2</span>编号 ,<br>         D.train_number <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-2</span>车次, A.station_no <span class="hljs-keyword">as</span> 起始站编号,<br>         A.station_name <span class="hljs-keyword">as</span> 起始站名称, B.station_no <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>换乘站编号 , <br>         B.station_name <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>换乘站名称 ,C.station_no <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-2</span>换乘站编号,<br>         D.station_no <span class="hljs-keyword">as</span> 目的站编号,  D.station_name <span class="hljs-keyword">as</span> 目的站名称,<br>         A.start_time <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>发车时间 , B.arrive_time <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-1</span>到达时间, <br>         C.start_time <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-2</span>发车时间 ,D.arrive_time <span class="hljs-keyword">as</span> 列车<span class="hljs-number">-2</span>到达时间 <br>         <span class="hljs-keyword">from</span>  train_parking_station <span class="hljs-keyword">as</span> A , train_parking_station <span class="hljs-keyword">as</span> B , <br>                  train_parking_station <span class="hljs-keyword">as</span> C ,train_parking_station <span class="hljs-keyword">as</span> D <br>                  <span class="hljs-keyword">where</span> A.station_name = <span class="hljs-string">&#x27;哈尔滨&#x27;</span> <span class="hljs-keyword">and</span> D.station_name = <span class="hljs-string">&#x27;广州&#x27;</span> <br>                           <span class="hljs-keyword">and</span> B.station_name = C.station_name <br>                           <span class="hljs-keyword">and</span>   A.train_no = B.train_no  <span class="hljs-keyword">and</span> C.train_no = D.train_no <span class="hljs-keyword">and</span> B.train_no &lt;&gt; C.train_no   <br>                           <span class="hljs-keyword">and</span> B.arrive_time &lt; C.arrive_time  <br>                           <span class="hljs-keyword">and</span>  A.station_no &lt;B.station_no <span class="hljs-keyword">and</span> C.station_no&lt;D.station_no<br>                           <span class="hljs-keyword">and</span> A.train_no  <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> train_no <span class="hljs-keyword">from</span> train_info <span class="hljs-keyword">where</span> train_running_type = <span class="hljs-string">&#x27;正在运行&#x27;</span>)<br>                           <span class="hljs-keyword">and</span> C.train_no <span class="hljs-keyword">in</span>  (<span class="hljs-keyword">select</span> train_no <span class="hljs-keyword">from</span> train_info <span class="hljs-keyword">where</span> train_running_type = <span class="hljs-string">&#x27;正在运行&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p><strong>（5）根据起始站编号，目的站编号，列车编号查询列车途中经停车站</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> A.train_no <span class="hljs-keyword">as</span> 列车编号, A.train_number <span class="hljs-keyword">as</span> 车次 ,<br>         A.station_name <span class="hljs-keyword">as</span> 起始站 ,B.station_name <span class="hljs-keyword">as</span> 目的站, <br>         A.station_no <span class="hljs-keyword">as</span> 经停站<span class="hljs-number">-1</span>编号 , B.station_no <span class="hljs-keyword">as</span> 经停站<span class="hljs-number">-2</span>编号 ,<br>         A.start_time <span class="hljs-keyword">as</span> 开车时间 , B.arrive_time <span class="hljs-keyword">as</span> 到达时间,<br>         A.running_time <span class="hljs-keyword">as</span> 到经停站<span class="hljs-number">-1</span>已运行时间 ,B.running_time <span class="hljs-keyword">as</span> 到经停站<span class="hljs-number">-2</span>已运行时间 <br>         <span class="hljs-keyword">from</span> train_parking_station <span class="hljs-keyword">as</span> A ,train_parking_station <span class="hljs-keyword">as</span> B <br>         <span class="hljs-keyword">where</span> A.station_no <span class="hljs-keyword">between</span> <span class="hljs-string">&#x27;起始站编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;目的站编号&#x27;</span><br>         <span class="hljs-keyword">and</span>  B.station_no <span class="hljs-keyword">between</span> <span class="hljs-string">&#x27;起始站编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;目的站编号&#x27;</span><br>         <span class="hljs-keyword">and</span> A.train_no = <span class="hljs-string">&#x27;列车编号&#x27;</span>                <br>         <span class="hljs-keyword">and</span> A.train_no = B.train_no <br>         <span class="hljs-keyword">and</span> B.station_no = A.station_no +<span class="hljs-number">1</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> A.station_no ,B.station_no <br></code></pre></td></tr></table></figure>
<p>（6）根据起始站编号，目的站编号，列车编号,日期查询在这一段行程中已经被占用的座位<br />
<img src="https://img-blog.csdnimg.cn/20200426231637520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzQxODcxNzk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span>            train_no, carriage_no , seat_no             <span class="hljs-keyword">from</span> order_list     <br>     <span class="hljs-keyword">where</span>  start_station_no &lt; <span class="hljs-string">&#x27;起始站编号&#x27;</span> <span class="hljs-keyword">and</span> end_station_no &gt; <span class="hljs-string">&#x27;目的站编号&#x27;</span> <br>               <span class="hljs-keyword">and</span> train_no = <span class="hljs-string">&#x27;列车编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">left</span>(train_start_date,<span class="hljs-number">10</span>) = <span class="hljs-string">&#x27;日期&#x27;</span> <br>               <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已退票&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已改签&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;未完成支付&#x27;</span><br><br><span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span>      train_no,carriage_no , seat_no             <span class="hljs-keyword">from</span> order_list <br>    <span class="hljs-keyword">where</span>  start_station_no &lt; <span class="hljs-string">&#x27;目的站编号&#x27;</span>  <span class="hljs-keyword">and</span> end_station_no &gt; <span class="hljs-string">&#x27;目的站编号&#x27;</span>                                                                                     <span class="hljs-keyword">and</span>  train_no = <span class="hljs-string">&#x27;列车编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">left</span>(train_start_date,<span class="hljs-number">10</span>) = <span class="hljs-string">&#x27;日期&#x27;</span> <br>              <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已退票&#x27;</span>  <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已改签&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;未完成支付&#x27;</span><br>    <br><span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span>      train_no,carriage_no , seat_no              <span class="hljs-keyword">from</span> order_list                                            <br>      <span class="hljs-keyword">where</span> start_station_no &gt; <span class="hljs-string">&#x27;起始站编号&#x27;</span> <span class="hljs-keyword">and</span>  end_station_no &lt;<span class="hljs-string">&#x27;目的站编号&#x27;</span>   <br>                <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已退票&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已改签&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;未完成支付&#x27;</span> <br>                <span class="hljs-keyword">and</span> train_no = <span class="hljs-string">&#x27;列车编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">left</span>(train_start_date,<span class="hljs-number">10</span>) = <span class="hljs-string">&#x27;日期&#x27;</span><br> <br><span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span>     train_no,carriage_no , seat_no             <span class="hljs-keyword">from</span> order_list                                                  <br>            <span class="hljs-keyword">where</span> start_station_no = <span class="hljs-string">&#x27;起始站编号&#x27;</span> <span class="hljs-keyword">and</span>  end_station_no = <span class="hljs-string">&#x27;目的站编号&#x27;</span>   <br>                     <span class="hljs-keyword">and</span> train_no = <span class="hljs-string">&#x27;列车编号&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">left</span>(train_start_date,<span class="hljs-number">10</span>) = <span class="hljs-string">&#x27;日期&#x27;</span><br>                    <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已退票&#x27;</span> <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;已改签&#x27;</span>  <span class="hljs-keyword">and</span> order_status &lt;&gt; <span class="hljs-string">&#x27;未完成支付&#x27;</span><br></code></pre></td></tr></table></figure>
<h2 id="参考文献"><a class="markdownIt-Anchor" href="#参考文献"></a> 参考文献</h2>
<p>【1】Database Systems Concepts (第六版) ，Abraham， Silberschatz等著，机械工业出版社，2013<br />
【2】数据库系统概论（第五版） ，王珊、萨师煊 ，高等教育出版社，2014<br />
【3】Spring Boot开发实战 陈光剑编著<br />
【4】Spring Boot+Vue全栈开发实战  王松著<br />
【5】vue.js2  尤雨溪著</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/vue/">vue</a><a class="post-meta__tags" href="/tags/springboot/">springboot</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/04/27/Undergraduate-Curriculum-Design/DataAnalysis-bosszp/"><img class="prev-cover" src="https://tva1.sinaimg.cn/large/832afe33ly1gbhxplql40j22801e0q3c.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">爬取boss直聘岗位数据进行数据分析</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/22/Undergraduate-Curriculum-Design/CurriculumDesign-Solitaire/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">面向对象实验——solitaire纸牌游戏</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/05/28/Undergraduate-Curriculum-Design/CurriculumDesign-jdsnCompare/" title="京东苏宁爬虫，商品价格比较"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-28</div><div class="title">京东苏宁爬虫，商品价格比较</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ccclll777</div><div class="author-info__description">胸怀猛虎 细嗅蔷薇</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ccclll777"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ccclll777" target="_blank" title="fab fa-github"><i class="GitHub"></i></a><a class="social-icon" href="mailto:sdu945860882@gmail.com" target="_blank" title="fa fa-envelope"><i class="E-Mail"></i></a><a class="social-icon" href="https://www.weibo.com/6732062654" target="_blank" title="fab fa-weibo"><i class="Weibo"></i></a><a class="social-icon" href="https://blog.csdn.net/baidu_41871794" target="_blank" title="gratipay"><i class="CSDN"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%93%BE%E6%8E%A5"><span class="toc-number">1.</span> <span class="toc-text"> 项目链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E7%AE%80%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text"> 题目简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8E%E6%8A%80%E6%9C%AF"><span class="toc-number">3.</span> <span class="toc-text"> 开发环境与技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text"> 需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B5%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.</span> <span class="toc-text"> 数据库概念设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#e-r%E5%9B%BE%E5%90%91%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%BD%AC%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text"> E-R图向关系模式的转化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1"><span class="toc-number">7.</span> <span class="toc-text"> 数据库逻辑设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.</span> <span class="toc-text"> 数据库物理结构设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-number">9.</span> <span class="toc-text"> 项目整体结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E6%88%AA%E5%9B%BE"><span class="toc-number">10.</span> <span class="toc-text"> 界面截图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AEsql%E8%AF%AD%E5%8F%A5%E8%AE%BE%E8%AE%A1"><span class="toc-number">11.</span> <span class="toc-text"> 关键sql语句设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">12.</span> <span class="toc-text"> 参考文献</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/10/16/Arithmetic-LeetCode/282/" title="Leetcode 282. 给表达式添加运算符"><img src="/2021/10/16/Arithmetic-LeetCode/282/show.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode 282. 给表达式添加运算符"/></a><div class="content"><a class="title" href="/2021/10/16/Arithmetic-LeetCode/282/" title="Leetcode 282. 给表达式添加运算符">Leetcode 282. 给表达式添加运算符</a><time datetime="2021-10-16T15:35:16.000Z" title="发表于 2021-10-16 23:35:16">2021-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/12/Pytorch/Pytorch-Reinforcement-Learning-Algorithm/" title="Pytorch强化学习算法实现"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pytorch强化学习算法实现"/></a><div class="content"><a class="title" href="/2020/12/12/Pytorch/Pytorch-Reinforcement-Learning-Algorithm/" title="Pytorch强化学习算法实现">Pytorch强化学习算法实现</a><time datetime="2020-12-12T02:54:37.000Z" title="发表于 2020-12-12 10:54:37">2020-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/09/Pytorch/PyTorch-Commonly-Used-Tool-Modules/" title="PyTorch常用工具模块"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch常用工具模块"/></a><div class="content"><a class="title" href="/2020/12/09/Pytorch/PyTorch-Commonly-Used-Tool-Modules/" title="PyTorch常用工具模块">PyTorch常用工具模块</a><time datetime="2020-12-09T13:32:23.000Z" title="发表于 2020-12-09 21:32:23">2020-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/09/Pytorch/Pytorch-and-torch-nn/" title="Pytorch中神经网络工具箱nn模块"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pytorch中神经网络工具箱nn模块"/></a><div class="content"><a class="title" href="/2020/12/09/Pytorch/Pytorch-and-torch-nn/" title="Pytorch中神经网络工具箱nn模块">Pytorch中神经网络工具箱nn模块</a><time datetime="2020-12-09T13:25:38.000Z" title="发表于 2020-12-09 21:25:38">2020-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/09/Pytorch/Pytorch-and-Autograd/" title="Pytorch中的Autograd"><img src="/2020/12/09/Pytorch/Pytorch-and-Autograd/torch.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pytorch中的Autograd"/></a><div class="content"><a class="title" href="/2020/12/09/Pytorch/Pytorch-and-Autograd/" title="Pytorch中的Autograd">Pytorch中的Autograd</a><time datetime="2020-12-09T13:25:19.000Z" title="发表于 2020-12-09 21:25:19">2020-12-09</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By ccclll777</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>